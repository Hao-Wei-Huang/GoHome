(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0937d39f"],{"0323":function(t,e,s){"use strict";function a(t,e,s){return t|e<<5|s<<10}function o(t){var e=31,s=992,a=31744,o={};return o.doubleRoomCount=t&e,o.tripleRoomCount=(t&s)>>5,o.quadrupleRoomCount=(t&a)>>10,o.total=o.doubleRoomCount+o.tripleRoomCount+o.quadrupleRoomCount,o}s.d(e,"b",(function(){return a})),s.d(e,"a",(function(){return o}))},"0fd0":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content text-left"},[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}},[s("font-awesome-icon",{staticClass:"h1 text-primary ld ld-bounce",attrs:{icon:["fas","home"]}})],1),s("div",{staticClass:"container mt-3 mt-md-5"},[s("div",{staticClass:"row flex-row-reverse"},[s("div",{staticClass:"col-md-8 col-lg-9"},[s("section",[s("h2",{staticClass:"mb-2"},[t._v(" "+t._s(t.hotel.title)+" "),t._l(Number(t.hotel.options.hotelRating),(function(t){return s("font-awesome-icon",{key:t,staticClass:"h6 text-warning",attrs:{icon:["fas","star"]}})}))],2),s("div",{staticClass:"h5 mb-2 text-primary"},[s("font-awesome-icon",{staticClass:"text-secondary mr-1",attrs:{icon:["fas","map-marker-alt"]}}),t._v(t._s(t.hotel.options.address.city)+t._s(t.hotel.options.address.road))],1),s("div",{staticClass:"thumb"},[t.hotel.imageUrl.length>0?s("swiper",{ref:"swiperTop",staticClass:"swiper gallery-top",attrs:{options:t.swiperOptionTop}},t._l(t.hotel.imageUrl,(function(t){return s("swiper-slide",{key:t,style:"background-image:url("+t+")"})})),1):t._e(),t.hotel.imageUrl.length>0?s("swiper",{ref:"swiperThumbs",staticClass:"swiper gallery-thumbs",attrs:{options:t.swiperOptionThumbs}},t._l(t.hotel.imageUrl,(function(t){return s("swiper-slide",{key:t,style:"background-image:url("+t+")"})})),1):t._e()],1)]),s("section",{staticClass:"mt-4"},[s("p",[t._v(" "+t._s(t.hotel.description)+" ")])]),s("section",{staticClass:"mt-5"},[s("h3",{staticClass:"mb-3"},[t._v("飯店設施")]),s("div",{staticClass:"text-primary"},[t.hotel.options.facilities.isBreakfast?s("span",{staticClass:"mr-3"},[s("font-awesome-icon",{staticClass:"mr-2 text-secondary",attrs:{icon:["fas","utensils"]}}),t._v("提供早餐")],1):t._e(),t.hotel.options.facilities.isWifi?s("span",{staticClass:"mr-3"},[s("font-awesome-icon",{staticClass:"mr-2 text-secondary",attrs:{icon:["fas","wifi"]}}),t._v("免費無線網路")],1):t._e(),t.hotel.options.facilities.isParking?s("span",{staticClass:"mr-3"},[s("font-awesome-icon",{staticClass:"mr-2 text-secondary",attrs:{icon:["fas","parking"]}}),t._v("有停車場")],1):t._e(),t.hotel.options.facilities.isSmokeBan?s("span",{staticClass:"mr-3"},[s("font-awesome-icon",{staticClass:"mr-2 text-secondary",attrs:{icon:["fas","smoking-ban"]}}),t._v("禁止吸菸")],1):t._e(),t.hotel.options.facilities.isPen?s("span",{staticClass:"mr-3"},[s("font-awesome-icon",{staticClass:"mr-2 text-secondary",attrs:{icon:["fas","dog"]}}),t._v("寵物可入住")],1):t._e()])]),s("section",{staticClass:"mt-5"},[s("h3",{staticClass:"mb-3"},[t._v("空房資訊")]),s("table",{staticClass:"table"},[t._m(0),s("tbody",[s("tr",[s("th",{attrs:{scope:"row"}},[t._v("奢華雙人房")]),s("td",{staticClass:"d-none d-md-table-cell"},t._l(2,(function(t){return s("font-awesome-icon",{key:t,staticClass:"text-primary",attrs:{icon:["fas","user"]}})})),1),s("td",{staticClass:"text-right h5"},[s("div",{staticClass:"h6 text-line-through text-danger"},[t._v("$"+t._s(t._f("moneyFilter")(t.hotel.origin_price)))]),t._v("$"+t._s(t._f("moneyFilter")(t.hotel.price)))]),s("td",[s("div",{staticClass:"input-group align-items-center justify-content-center"},[s("div",{staticClass:"input-group-prepend ml-2"},[s("button",{staticClass:"btn btn-outline-primary",attrs:{disabled:t.doubleRoomCount<=0},on:{click:function(e){t.doubleRoomCount-=1}}},[t._v("-")])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.doubleRoomCount,expression:"doubleRoomCount"}],staticClass:"form-control text-center hotel-room-count",attrs:{type:"text",readonly:""},domProps:{value:t.doubleRoomCount},on:{input:function(e){e.target.composing||(t.doubleRoomCount=e.target.value)}}}),s("div",{staticClass:"input-group-append mr-2"},[s("button",{staticClass:"btn btn-outline-primary",on:{click:function(e){t.doubleRoomCount+=1}}},[t._v("+")])])])])]),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("頂級三人房")]),s("td",{staticClass:"d-none d-md-table-cell"},t._l(3,(function(t){return s("font-awesome-icon",{key:t,staticClass:"text-primary",attrs:{icon:["fas","user"]}})})),1),s("td",{staticClass:"text-right h5"},[s("div",{staticClass:"h6 text-line-through text-danger"},[t._v("$"+t._s(t._f("moneyFilter")(t.hotel.options.roomPrice.tripleRoomOriginPrice)))]),t._v("$"+t._s(t._f("moneyFilter")(t.hotel.options.roomPrice.tripleRoomPrice)))]),s("td",[s("div",{staticClass:"input-group align-items-center justify-content-center"},[s("div",{staticClass:"input-group-prepend ml-2"},[s("button",{staticClass:"btn btn-outline-primary",attrs:{disabled:t.tripleRoomCount<=0},on:{click:function(e){t.tripleRoomCount-=1}}},[t._v("-")])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tripleRoomCount,expression:"tripleRoomCount"}],staticClass:"form-control text-center hotel-room-count",attrs:{type:"text",readonly:""},domProps:{value:t.tripleRoomCount},on:{input:function(e){e.target.composing||(t.tripleRoomCount=e.target.value)}}}),s("div",{staticClass:"input-group-append mr-2"},[s("button",{staticClass:"btn btn-outline-primary",on:{click:function(e){t.tripleRoomCount+=1}}},[t._v("+")])])])])]),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("豪華四人房")]),s("td",{staticClass:"d-none d-md-table-cell"},t._l(4,(function(t){return s("font-awesome-icon",{key:t,staticClass:"text-primary",attrs:{icon:["fas","user"]}})})),1),s("td",{staticClass:"text-right h5"},[s("div",{staticClass:"h6 text-line-through text-danger"},[t._v("$"+t._s(t._f("moneyFilter")(t.hotel.options.roomPrice.quadrupleRoomOriginPrice)))]),t._v("$"+t._s(t._f("moneyFilter")(t.hotel.options.roomPrice.quadrupleRoomPrice)))]),s("td",[s("div",{staticClass:"input-group align-items-center justify-content-center"},[s("div",{staticClass:"input-group-prepend ml-2"},[s("button",{staticClass:"btn btn-outline-primary",attrs:{disabled:t.quadrupleRoomCount<=0},on:{click:function(e){t.quadrupleRoomCount-=1}}},[t._v("-")])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.quadrupleRoomCount,expression:"quadrupleRoomCount"}],staticClass:"form-control text-center hotel-room-count",attrs:{type:"text",readonly:""},domProps:{value:t.quadrupleRoomCount},on:{input:function(e){e.target.composing||(t.quadrupleRoomCount=e.target.value)}}}),s("div",{staticClass:"input-group-append mr-2"},[s("button",{staticClass:"btn btn-outline-primary",on:{click:function(e){t.quadrupleRoomCount+=1}}},[t._v("+")])])])])])])]),s("div",{staticClass:"text-right"},[s("a",{staticClass:"btn btn-outline-primary mr-3",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.addHotelToCart()}}},[t._v("加入購物車")]),s("a",{staticClass:"btn btn-primary",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.checkout(e)}}},[t._v("現在預定")])])])]),s("div",{staticClass:"col-md-4 col-lg-3 text-left mb-3"},[s("section",{staticClass:"text-left d-md-block d-none text-white"},[s("h4",{staticClass:"bg-primary px-3 py-2"},[t._v("找旅館")]),s("form",{staticClass:"bg-primary p-3",on:{submit:function(e){return e.preventDefault(),t.goHotels(e)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"destination"}},[t._v("目的地")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.search.destination,expression:"search.destination"}],staticClass:"form-control mt-1 cursor rounded-0 border-0",attrs:{id:"destination",name:"縣市"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.search,"destination",e.target.multiple?s:s[0])}}},[s("option",{attrs:{disabled:"",value:""}},[t._v("請選擇")]),s("option",{attrs:{value:"台北市"}},[t._v("台北市")]),s("option",{attrs:{value:"台中市"}},[t._v("台中市")]),s("option",{attrs:{value:"嘉義縣"}},[t._v("嘉義縣")]),s("option",{attrs:{value:"台南市"}},[t._v("台南市")]),s("option",{attrs:{value:"高雄市"}},[t._v("高雄市")]),s("option",{attrs:{value:"屏東縣"}},[t._v("屏東縣")])])]),s("date-picker",{attrs:{mode:"range",color:"teal",popover:{placement:"top",visibility:"click"},"min-date":new Date},model:{value:t.search.range,callback:function(e){t.$set(t.search,"range",e)},expression:"search.range"}},[s("div",[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"checkinDate"}},[t._v("入住時間")]),s("div",{staticClass:"position-relative mt-1"},[s("font-awesome-icon",{staticClass:"text-primary mr-1 calendar-icon",attrs:{icon:["far","calendar-alt"]}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.checkinDate,expression:"checkinDate"}],staticClass:"form-control pl-4 bg-white cursor rounded-0 border-0",attrs:{type:"text",id:"checkinDate","aria-describedby":"pickerDate",readonly:""},domProps:{value:t.checkinDate},on:{input:function(e){e.target.composing||(t.checkinDate=e.target.value)}}})],1)])])]),s("date-picker",{attrs:{mode:"range",color:"teal",popover:{placement:"top",visibility:"click"},"min-date":new Date},model:{value:t.search.range,callback:function(e){t.$set(t.search,"range",e)},expression:"search.range"}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"checkoutDate"}},[t._v("退房時間")]),s("div",{staticClass:"position-relative mt-1"},[s("font-awesome-icon",{staticClass:"text-primary mr-1 calendar-icon",attrs:{icon:["far","calendar-alt"]}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.checkoutDate,expression:"checkoutDate"}],staticClass:"form-control pl-4 bg-white cursor rounded-0 border-0",attrs:{type:"text",id:"checkoutDate","aria-describedby":"pickerDate",readonly:""},domProps:{value:t.checkoutDate},on:{input:function(e){e.target.composing||(t.checkoutDate=e.target.value)}}})],1)])]),s("button",{staticClass:"btn btn-outline-secondary w-100 rounded-0"},[t._v("搜尋")])],1)]),s("section",{staticClass:"mt-3"},[s("div",{staticClass:"h5 mb-2 text-primary"},[s("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:["fas","street-view"]}}),t._v(t._s(t.hotel.options.address.city)+t._s(t.hotel.options.address.road))],1),s("iframe",{staticStyle:{border:"0"},attrs:{src:t.hotel.options.address.googleMapUrl,width:"100%",frameborder:"0",allowfullscreen:"","aria-hidden":"false",tabindex:"0"}})]),s("section",{staticClass:"text-left mt-3"},[s("h4",[t._v("住客評價")]),s("div",{staticClass:"media mt-3"},[s("img",{staticClass:"portrait",attrs:{src:"https://randomuser.me/api/portraits/men/27.jpg",alt:"頭像載入中"}}),s("div",{staticClass:"media-body ml-2"},[s("h5",{staticClass:"mt-0 text-primary"},[t._v("凱凱"),s("font-awesome-icon",{staticClass:"text-success ml-1",attrs:{icon:["fas","thumbs-up"]}})],1),s("p",[t._v("飯店舒適，服務人員相當貼心，就像回到家一樣，如果有機會下次會再來住。")])])]),s("div",{staticClass:"media mt-3"},[s("img",{staticClass:"portrait",attrs:{src:"https://randomuser.me/api/portraits/women/3.jpg",alt:"頭像載入中"}}),s("div",{staticClass:"media-body ml-2"},[s("h5",{staticClass:"mt-0 text-primary"},[t._v("珍妮"),s("font-awesome-icon",{staticClass:"text-co-primary ml-1",attrs:{icon:["far","kiss-wink-heart"]}})],1),s("p",[t._v("CP值超高，很適合情侶來住，晚上夜景相當漂亮，飯店也很乾淨，可以感受到老闆的用心。")])])]),s("div",{staticClass:"media mt-3"},[s("img",{staticClass:"portrait",attrs:{src:"https://randomuser.me/api/portraits/women/44.jpg",alt:"頭像載入中"}}),s("div",{staticClass:"media-body ml-2"},[s("h5",{staticClass:"mt-0 text-primary"},[t._v("潔西卡"),s("font-awesome-icon",{staticClass:"text-danger ml-1",attrs:{icon:["fas","heart"]}})],1),s("p",[t._v("服務人員熱情接待，全程到我們到房間及介紹附近知名景點讓我們能玩的很盡興，食物也很好吃。")])])])])])]),s("section",{staticClass:"relative-hotels mt-3 mt-md-5"},[s("h3",{staticClass:"mb-3"},[t._v("其他人還看過這些飯店")]),t.hotels.length>0?s("swiper",{staticClass:"swiper row p-1",attrs:{options:t.swiperOption}},[t._l(t.hotels,(function(e){return[s("swiper-slide",{key:e.id,staticClass:"col-sm-6 col-md-4 col-lg-3  cursor"},[s("div",{staticClass:"text-left bg-shadow h-100",on:{click:function(s){return t.goHotel(e.id)}}},[s("div",{staticClass:"bg-md-image",style:"background-image: url("+e.imageUrl[0]+");}"}),s("div",{staticClass:"p-3"},[s("div",{staticClass:"d-flex align-items-end"},[s("h5",{staticClass:"mr-1"},[t._v(t._s(e.title))]),t._l(Number(e.options.hotelRating),(function(t){return s("font-awesome-icon",{key:t,staticClass:"text-warning",attrs:{icon:["fas","star"]}})}))],2),s("span",[s("font-awesome-icon",{staticClass:"text-secondary mr-1",attrs:{icon:["fas","map-marker-alt"]}}),t._v(t._s(e.options.address.city)+t._s(e.options.address.road))],1)])])])]})),s("div",{staticClass:"swiper-button-prev",attrs:{slot:"button-prev"},slot:"button-prev"},[s("font-awesome-icon",{staticClass:"text-info h4",attrs:{icon:["fas","chevron-circle-left"]}})],1),s("div",{staticClass:"swiper-button-next",attrs:{slot:"button-next"},slot:"button-next"},[s("font-awesome-icon",{staticClass:"text-info h4",attrs:{icon:["fas","chevron-circle-right"]}})],1)],2):t._e()],1)])],1)},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",{staticClass:"bg-primary text-white"},[s("th",{attrs:{scope:"col"}},[t._v("房型")]),s("th",{staticClass:"d-none d-md-table-cell",attrs:{scope:"col"}},[t._v("人數")]),s("th",{attrs:{scope:"col"}},[t._v("價格")]),s("th",{attrs:{scope:"col"}},[t._v("房間數量")])])])}],i=(s("99af"),s("4de4"),s("4160"),s("ac1f"),s("841c"),s("159b"),s("0323")),n=s("404b"),r=s.n(n),c={name:"carrousel",components:{"date-picker":r.a},data:function(){return{hotelID:"",hotel:{imageUrl:[],options:{hotelRating:"",roomPrice:{},facilities:{},address:{}}},hotels:[],cart:[],isLoading:!1,doubleRoomCount:0,tripleRoomCount:0,quadrupleRoomCount:0,swiperOptionTop:{loop:!0,loopAdditionalSlides:30,slidesPerView:1,spaceBetween:10},swiperOptionThumbs:{loop:!0,loopAdditionalSlides:30,spaceBetween:10,centeredSlides:!0,slidesPerView:6,touchRatio:.2,slideToClickedSlide:!0,grabCursor:!0},search:{destination:"台北市",range:{start:new Date,end:new Date((new Date).getTime()+864e5)}},swiperOption:{slidesPerView:4,spaceBetween:0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{992:{slidesPerView:4,spaceBetween:0},768:{slidesPerView:3,spaceBetween:0},576:{slidesPerView:2,spaceBetween:0},300:{slidesPerView:1,spaceBetween:0}}}}},methods:{getHotelID:function(){this.hotelID=this.$route.params.id},getHotel:function(){var t=this;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io/api/").concat("c62ed506-1fb9-4a50-912d-1c0feaaff93a","/ec/product/").concat(this.hotelID);this.$http.get(e).then((function(e){t.hotel=e.data.data,t.$nextTick((function(){var e=t.$refs.swiperTop.$swiper,s=t.$refs.swiperThumbs.$swiper;e.controller.control=s,s.controller.control=e})),t.getHotels(),t.isLoading=!1})).catch((function(e){t.$bus.$emit("pushmessage","warning","連線錯誤 : ".concat(e)),t.isLoading=!1}))},getHotels:function(){var t=this,e="".concat("https://course-ec-api.hexschool.io/api/").concat("c62ed506-1fb9-4a50-912d-1c0feaaff93a","/ec/products");this.isLoading=!0,this.$http.get(e).then((function(e){t.hotels=e.data.data,t.getRelativeHotels()})).catch((function(e){t.$bus.$emit("pushmessage","warning","連線錯誤 : ".concat(e))}))},getCartData:function(){var t=this,e="".concat("https://course-ec-api.hexschool.io/api/").concat("c62ed506-1fb9-4a50-912d-1c0feaaff93a","/ec/shopping");this.$http.get(e).then((function(e){t.cart=e.data.data})).catch((function(e){t.$bus.$emit("pushmessage","warning","連線錯誤 : ".concat(e))}))},addHotelToCart:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=0,a=!1;if(0===(this.doubleRoomCount|this.tripleRoomCount|this.quadrupleRoomCount))return e&&this.cart.length?this.$router.push("/cart"):this.$bus.$emit("pushmessage","warning","請選擇房型"),"";if(this.cart.forEach((function(s,o){s.product.id===t.hotelID&&(e||t.$bus.$emit("pushmessage","warning","該旅館已經加入購物車囉"),a=!0)})),a)return e&&this.$router.push("/cart"),"";s=Object(i["b"])(this.doubleRoomCount,this.tripleRoomCount,this.quadrupleRoomCount);var o={product:this.hotelID,quantity:s};this.isLoading=!0;var n="".concat("https://course-ec-api.hexschool.io/api/").concat("c62ed506-1fb9-4a50-912d-1c0feaaff93a","/ec/shopping");this.$http.post(n,o).then((function(s){e?t.$router.push("/cart"):t.$bus.$emit("pushmessage","success","該旅館已經成功加入購物車"),t.getCartData(),t.$bus.$emit("updateCart"),t.isLoading=!1})).catch((function(e){t.$bus.$emit("pushmessage","warning","連線錯誤 : ".concat(e)),t.isLoading=!1}))},checkout:function(){this.addHotelToCart(!0)},getSearchDate:function(){this.$route.query.search&&this.$route.query.search.destination&&(this.search.destination=this.$route.query.search.destination,this.search.range.start=new Date(this.$route.query.search.range.start),this.search.range.end=new Date(this.$route.query.search.range.end))},goHotel:function(t){this.$router.push("/product/".concat(t))},goHotels:function(){if(""!==this.search.destination){var t=JSON.parse(JSON.stringify(this.search));t.range.start=this.search.range.start.getTime(),t.range.end=this.search.range.end.getTime(),this.$router.push({path:"/products",query:{search:t}})}else this.$bus.$emit("pushmessage","warning","請選擇旅館地點")},getRelativeHotels:function(){var t=this,e=["台北市","台中市","嘉義縣","台南市","高雄市","屏東縣"],s=[];e.forEach((function(a,o){t.hotel.options.address.city===a&&(s.push(a),e.length-1===o?s.push(e[o-1]):s.push(e[o+1]))})),this.hotels=this.hotels.filter((function(e){return(e.options.address.city===s[0]||e.options.address.city===s[1])&&e.id!==t.hotel.id}))},formateDate:function(t){var e=["日","一","二","三","四","五","六"],s=t.getMonth()+1,a=t.getDate(),o=t.getDay();return s<10&&(s="0"+s),a<10&&(a="0"+a),"".concat(t.getFullYear(),"-").concat(s,"-").concat(a," 星期").concat(e[o])}},created:function(){this.getHotelID(),this.getHotel(),this.getCartData(),this.getSearchDate()},computed:{checkinDate:function(){return this.formateDate(this.search.range.start)},checkoutDate:function(){return this.formateDate(this.search.range.end)}}},l=c,u=(s("5a74"),s("2877")),d=Object(u["a"])(l,a,o,!1,null,null,null);e["default"]=d.exports},"5a74":function(t,e,s){"use strict";var a=s("7f16"),o=s.n(a);o.a},"7f16":function(t,e,s){}}]);
//# sourceMappingURL=chunk-0937d39f.2e788ffd.js.map