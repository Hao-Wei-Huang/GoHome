(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63fe0612"],{"0323":function(t,o,e){"use strict";function a(t,o,e){return t|o<<5|e<<10}function r(t){var o=31,e=992,a=31744,r={};return r.doubleRoomCount=t&o,r.tripleRoomCount=(t&e)>>5,r.quadrupleRoomCount=(t&a)>>10,r}e.d(o,"b",(function(){return a})),e.d(o,"a",(function(){return r}))},"13d5":function(t,o,e){"use strict";var a=e("23e7"),r=e("d58f").left,n=e("a640"),s=e("ae40"),i=n("reduce"),c=s("reduce",{1:0});a({target:"Array",proto:!0,forced:!i||!c},{reduce:function(t){return r(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},2355:function(t,o,e){"use strict";e.r(o);var a=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"content text-left"},[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(o){t.isLoading=o}}}),e("div",{staticClass:"container"},[e("h2",{staticClass:"text-center my-3"},[t._v("選擇旅館")]),e("div",{staticClass:"row flex-column align-items-center"},[e("div",{staticClass:"col-8"},[t._l(t.cartHotelsData,(function(o,a){return e("div",{key:o.id,staticClass:"card mb-3 bg-shadow"},[e("div",{staticClass:"row no-gutters"},[e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"bg-md-image h-100",style:"background-image:url("+o.imageUrl[0]+")"})]),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"card-body d-flex flex-column justify-content-center h-100"},[e("h5",{staticClass:"card-title"},[t._v(t._s(o.title))]),e("h6",{staticClass:"mb-1"},[t._v("奢華雙人房")]),e("div",{staticClass:"input-group mb-3 align-items-center"},[t._v(" $"+t._s(t._f("moneyFilter")(o.price))+" x "),e("div",{staticClass:"input-group-prepend ml-2"},[e("button",{staticClass:"btn btn-outline-primary",attrs:{disabled:o.roomCount.doubleRoomCount<=0},on:{click:function(o){return t.reduceCount(a,"doubleRoom")}}},[t._v("-")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:o.roomCount.doubleRoomCount,expression:"item.roomCount.doubleRoomCount"}],staticClass:"form-control text-center hotel-room-count",attrs:{type:"text"},domProps:{value:o.roomCount.doubleRoomCount},on:{input:function(e){e.target.composing||t.$set(o.roomCount,"doubleRoomCount",e.target.value)}}}),e("div",{staticClass:"input-group-append mr-2"},[e("button",{staticClass:"btn btn-outline-primary",on:{click:function(o){return t.addCount(a,"doubleRoom")}}},[t._v("+")])]),t._v(" "+t._s(o.unit)+" ")]),e("h6",{staticClass:"mb-1"},[t._v("頂級三人房")]),e("div",{staticClass:"input-group mb-3 align-items-center"},[t._v(" $"+t._s(t._f("moneyFilter")(o.options.roomPrice.tripleRoomPrice))+" x "),e("div",{staticClass:"input-group-prepend ml-2"},[e("button",{staticClass:"btn btn-outline-primary",attrs:{disabled:o.roomCount.tripleRoomCount<=0},on:{click:function(o){return t.reduceCount(a,"tripleRoom")}}},[t._v("-")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:o.roomCount.tripleRoomCount,expression:"item.roomCount.tripleRoomCount"}],staticClass:"form-control text-center hotel-room-count",attrs:{type:"text"},domProps:{value:o.roomCount.tripleRoomCount},on:{input:function(e){e.target.composing||t.$set(o.roomCount,"tripleRoomCount",e.target.value)}}}),e("div",{staticClass:"input-group-append mr-2"},[e("button",{staticClass:"btn btn-outline-primary",on:{click:function(o){return t.addCount(a,"tripleRoom")}}},[t._v("+")])]),t._v(" "+t._s(o.unit)+" ")]),e("h6",{staticClass:"mb-1"},[t._v("豪華四人房")]),e("div",{staticClass:"input-group mb-3 align-items-center"},[t._v(" $"+t._s(t._f("moneyFilter")(o.options.roomPrice.quadrupleRoomPrice))+" x "),e("div",{staticClass:"input-group-prepend ml-2"},[e("button",{staticClass:"btn btn-outline-primary",attrs:{disabled:o.roomCount.quadrupleRoomCount<=0},on:{click:function(o){return t.reduceCount(a,"quadrupleRoom")}}},[t._v("-")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:o.roomCount.quadrupleRoomCount,expression:"item.roomCount.quadrupleRoomCount"}],staticClass:"form-control text-center hotel-room-count",attrs:{type:"text"},domProps:{value:o.roomCount.quadrupleRoomCount},on:{input:function(e){e.target.composing||t.$set(o.roomCount,"quadrupleRoomCount",e.target.value)}}}),e("div",{staticClass:"input-group-append mr-2"},[e("button",{staticClass:"btn btn-outline-primary",on:{click:function(o){return t.addCount(a,"quadrupleRoom")}}},[t._v("+")])]),t._v(" "+t._s(o.unit)+" ")])])]),e("div",{staticClass:"col-md-2 d-flex align-items-center"},[e("button",{staticClass:"btn btn-outline-danger",on:{click:function(o){return t.removeCartHotel(a)}}},[t._v("刪除")])])])])})),e("h3",{staticClass:"d-flex justify-content-between my-4"},[t._v("金額: "),e("span",[t._v("TWD "),e("span",{staticClass:"text-success"},[t._v(t._s(t._f("moneyFilter")(t.computeAmount)))])])]),e("hr",{staticClass:"bg-success"})],2),e("div",{staticClass:"col-8"},[e("h3",[t._v("顧客資訊")]),e("validation-observer",{scopedSlots:t._u([{key:"default",fn:function(o){var a=o.invalid;return[e("form",{staticClass:"mt-4 w-75",on:{submit:function(o){return o.preventDefault(),t.sumbitForm(o)}}},[e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(o){var a=o.errors,r=o.classes;return[e("label",{attrs:{for:"customerOrderName"}},[t._v("收件人姓名*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.costomerInfo.name,expression:"costomerInfo.name"}],staticClass:"form-control",class:r,attrs:{type:"text",id:"customerOrderName ",name:"姓名"},domProps:{value:t.costomerInfo.name},on:{input:function(o){o.target.composing||t.$set(t.costomerInfo,"name",o.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group "},[e("validation-provider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(o){var a=o.errors,r=o.classes;return[e("label",{attrs:{for:"customerOrderEmail "}},[t._v("Email address*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.costomerInfo.email,expression:"costomerInfo.email"}],staticClass:"form-control ",class:r,attrs:{type:"tel ",id:"customerOrderEmail ",placeholder:" ",name:"email"},domProps:{value:t.costomerInfo.email},on:{input:function(o){o.target.composing||t.$set(t.costomerInfo,"email",o.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group "},[e("validation-provider",{attrs:{rules:"required|min:8"},scopedSlots:t._u([{key:"default",fn:function(o){var a=o.errors,r=o.classes;return[e("label",{attrs:{for:"customerOrderTel "}},[t._v("電話*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.costomerInfo.tel,expression:"costomerInfo.tel"}],staticClass:"form-control ",class:r,attrs:{type:"number ",id:"customerOrderTel ",placeholder:" ",name:"電話"},domProps:{value:t.costomerInfo.tel},on:{input:function(o){o.target.composing||t.$set(t.costomerInfo,"tel",o.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group "},[e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(o){var a=o.errors,r=o.classes;return[e("label",{attrs:{for:"customerOrderAddress "}},[t._v("地址*")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.costomerInfo.address,expression:"costomerInfo.address"}],staticClass:"form-control ",class:r,attrs:{type:"text",id:"customerOrderAddress ",placeholder:" ",name:"地址"},domProps:{value:t.costomerInfo.address},on:{input:function(o){o.target.composing||t.$set(t.costomerInfo,"address",o.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group "},[e("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(o){var a=o.errors,r=o.classes;return[e("label",{attrs:{for:"customerOrderPayment"}},[t._v("購買方式*")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.costomerInfo.payment,expression:"costomerInfo.payment"}],staticClass:"form-control ",class:r,attrs:{id:"customerOrderPayment ",name:"購買方式"},on:{change:function(o){var e=Array.prototype.filter.call(o.target.options,(function(t){return t.selected})).map((function(t){var o="_value"in t?t._value:t.value;return o}));t.$set(t.costomerInfo,"payment",o.target.multiple?e:e[0])}}},[e("option",{attrs:{selected:"",disabled:"disabled",value:""}},[t._v("請選擇付款方式")]),e("option",{attrs:{value:"WebATM"}},[t._v("WebATM")]),e("option",{attrs:{value:"ATM"}},[t._v("ATM")]),e("option",{attrs:{value:"Credit"}},[t._v("Credit")]),e("option",{attrs:{value:"ApplePay"}},[t._v("ApplePay")]),e("option",{attrs:{value:"GooglePay"}},[t._v("GooglePay")])]),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group "},[e("label",{attrs:{for:"customerOrderMessage "}},[t._v("留言")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.costomerInfo.message,expression:"costomerInfo.message"}],staticClass:"form-control ",attrs:{id:"customerOrderMessage ",rows:"3 "},domProps:{value:t.costomerInfo.message},on:{input:function(o){o.target.composing||t.$set(t.costomerInfo,"message",o.target.value)}}})]),e("div",{staticClass:"text-right"},[e("button",{staticClass:"btn btn-danger w-100",attrs:{type:"submit",disabled:a}},[t._v("確認送出訂單")])])])]}}])})],1)])])],1)},r=[],n=(e("99af"),e("4160"),e("13d5"),e("a434"),e("159b"),e("0323")),s={data:function(){return{cart:[],cartHotelsData:[],costomerInfo:{name:"",email:"",tel:"",address:"",payment:"",message:""},isLoading:!1}},methods:{getCartData:function(){var t=this,o="".concat("https://course-ec-api.hexschool.io/api/").concat("c62ed506-1fb9-4a50-912d-1c0feaaff93a","/ec/shopping");this.isLoading=!0,this.$http.get(o).then((function(o){t.cart=o.data.data,t.cart.forEach((function(o,e){var a="".concat("https://course-ec-api.hexschool.io/api/").concat("c62ed506-1fb9-4a50-912d-1c0feaaff93a","/ec/product/").concat(o.product.id);t.$http.get(a).then((function(e){t.isLoading=!1,e.data.data.roomCount=Object(n["a"])(o.quantity),t.cartHotelsData.push(e.data.data)})).catch((function(t){console.log("error:",t)}))}))})).catch((function(t){console.log("error:",t)}))},removeCartHotel:function(t){var o=this,e="".concat("https://course-ec-api.hexschool.io/api/").concat("c62ed506-1fb9-4a50-912d-1c0feaaff93a","/ec/shopping/").concat(this.cart[t].product.id),a={product:this.cartHotelsData[t].id};this.isLoading=!0,this.$http.delete(e,a).then((function(e){o.cartHotelsData.splice(t,1),o.isLoading=!1})).catch((function(t){console.log("error:",t),o.isLoading=!1}))},addCount:function(t,o){var e=this,a="".concat("https://course-ec-api.hexschool.io/api/").concat("c62ed506-1fb9-4a50-912d-1c0feaaff93a","/ec/shopping"),r=this.cartHotelsData[t].roomCount;switch(o){case"doubleRoom":r.doubleRoomCount+=1;break;case"tripleRoom":r.tripleRoomCount+=1;break;case"quadrupleRoom":r.quadrupleRoomCount+=1;break}var s=Object(n["b"])(r.doubleRoomCount,r.tripleRoomCount,r.quadrupleRoomCount),i={product:this.cartHotelsData[t].id,quantity:s};this.isLoading=!0,this.$http.patch(a,i).then((function(o){e.cartHotelsData[t].roomCount=Object(n["a"])(o.data.data.quantity),e.isLoading=!1})).catch((function(t){console.log("error:",t),e.isLoading=!1}))},reduceCount:function(t,o){var e=this,a="".concat("https://course-ec-api.hexschool.io/api/").concat("c62ed506-1fb9-4a50-912d-1c0feaaff93a","/ec/shopping"),r=this.cartHotelsData[t].roomCount;switch(o){case"doubleRoom":r.doubleRoomCount-=1;break;case"tripleRoom":r.tripleRoomCount-=1;break;case"quadrupleRoom":r.quadrupleRoomCount-=1;break}var s=Object(n["b"])(r.doubleRoomCount,r.tripleRoomCount,r.quadrupleRoomCount);if(0===s)this.removeCartHotel(t);else{var i={product:this.cartHotelsData[t].id,quantity:s};this.isLoading=!0,this.$http.patch(a,i).then((function(o){e.cartHotelsData[t].roomCount=Object(n["a"])(o.data.data.quantity),e.isLoading=!1})).catch((function(t){console.log("error:",t),e.isLoading=!1}))}},sumbitForm:function(){var t=this,o="".concat("https://course-ec-api.hexschool.io/api/").concat("c62ed506-1fb9-4a50-912d-1c0feaaff93a","/ec/orders");this.$http.post(o,this.costomerInfo).then((function(o){t.$router.push({name:"Customer Order",params:{orderId:o.data.data.id,amount:t.computeAmount}})})).catch((function(t){console.log("error:",t)}))}},created:function(){this.getCartData()},computed:{computeAmount:function(){return this.cartHotelsData.length?this.cartHotelsData.reduce((function(t,o){return t+o.roomCount.doubleRoomCount*o.price+o.roomCount.tripleRoomCount*o.options.roomPrice.tripleRoomPrice+o.roomCount.quadrupleRoomCount*o.options.roomPrice.quadrupleRoomPrice}),0):0}}},i=s,c=(e("ed1e"),e("2877")),u=Object(c["a"])(i,a,r,!1,null,null,null);o["default"]=u.exports},6971:function(t,o,e){},"99af":function(t,o,e){"use strict";var a=e("23e7"),r=e("d039"),n=e("e8b5"),s=e("861d"),i=e("7b0b"),c=e("50c4"),u=e("8418"),l=e("65f0"),d=e("1dde"),m=e("b622"),p=e("2d00"),f=m("isConcatSpreadable"),v=9007199254740991,C="Maximum allowed index exceeded",b=p>=51||!r((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),h=d("concat"),g=function(t){if(!s(t))return!1;var o=t[f];return void 0!==o?!!o:n(t)},_=!b||!h;a({target:"Array",proto:!0,forced:_},{concat:function(t){var o,e,a,r,n,s=i(this),d=l(s,0),m=0;for(o=-1,a=arguments.length;o<a;o++)if(n=-1===o?s:arguments[o],g(n)){if(r=c(n.length),m+r>v)throw TypeError(C);for(e=0;e<r;e++,m++)e in n&&u(d,m,n[e])}else{if(m>=v)throw TypeError(C);u(d,m++,n)}return d.length=m,d}})},d58f:function(t,o,e){var a=e("1c0b"),r=e("7b0b"),n=e("44ad"),s=e("50c4"),i=function(t){return function(o,e,i,c){a(e);var u=r(o),l=n(u),d=s(u.length),m=t?d-1:0,p=t?-1:1;if(i<2)while(1){if(m in l){c=l[m],m+=p;break}if(m+=p,t?m<0:d<=m)throw TypeError("Reduce of empty array with no initial value")}for(;t?m>=0:d>m;m+=p)m in l&&(c=e(c,l[m],m,u));return c}};t.exports={left:i(!1),right:i(!0)}},ed1e:function(t,o,e){"use strict";var a=e("6971"),r=e.n(a);r.a}}]);
//# sourceMappingURL=chunk-63fe0612.29ca589a.js.map