(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-409d9451"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"81b1":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}},[a("font-awesome-icon",{staticClass:"h1 text-primary ld ld-bounce",attrs:{icon:["fas","home"]}})],1),a("section",{staticClass:"py-3 py-md-5"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4 col-lg-3 text-left sticky-top"},[a("nav",{staticClass:"navbar navbar-expand-md navbar-light bg-primary p-0 flex-md-column align-items-md-stretch"},[a("h4",{staticClass:"px-3 py-2 text-white"},[t._v("找旅館")]),a("button",{staticClass:"navbar-toggler p-2 mr-2",attrs:{type:"button","data-toggle":"collapse","data-target":"#seachedData","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("font-awesome-icon",{staticClass:"text-white",attrs:{icon:["fas","search"]}})],1),a("div",{ref:"seachedData",staticClass:"collapse navbar-collapse text-white",attrs:{id:"seachedData"}},[a("form",{staticClass:"bg-primary p-3 w-100",on:{submit:function(e){return e.preventDefault(),t.searchRoom(e)}}},[a("div",{staticClass:"form-row flex-column"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"destination"}},[t._v("目的地")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tempSearch.destination,expression:"tempSearch.destination"}],staticClass:"form-control mt-1 cursor rounded-0 border-0",attrs:{id:"destination",name:"縣市"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tempSearch,"destination",e.target.multiple?a:a[0])}}},[a("option",{attrs:{disabled:"",value:""}},[t._v("請選擇")]),a("option",{attrs:{value:"台北市"}},[t._v("台北市")]),a("option",{attrs:{value:"台中市"}},[t._v("台中市")]),a("option",{attrs:{value:"嘉義縣"}},[t._v("嘉義縣")]),a("option",{attrs:{value:"台南市"}},[t._v("台南市")]),a("option",{attrs:{value:"高雄市"}},[t._v("高雄市")]),a("option",{attrs:{value:"屏東縣"}},[t._v("屏東縣")])])]),a("date-picker",{attrs:{mode:"range",color:"teal",popover:{placement:"bottom",visibility:"click"},"min-date":new Date},model:{value:t.tempSearch.range,callback:function(e){t.$set(t.tempSearch,"range",e)},expression:"tempSearch.range"}},[a("div",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"checkinDate"}},[t._v("入住時間")]),a("div",{staticClass:"position-relative mt-1"},[a("font-awesome-icon",{staticClass:"position-absolute text-primary mr-1 calendar-icon",attrs:{icon:["far","calendar-alt"]}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkinDate,expression:"checkinDate"}],staticClass:"form-control pl-4 bg-white cursor rounded-0 border-0",attrs:{type:"text",id:"checkinDate","aria-describedby":"pickerDate",readonly:""},domProps:{value:t.checkinDate},on:{input:function(e){e.target.composing||(t.checkinDate=e.target.value)}}})],1)])])]),a("date-picker",{attrs:{mode:"range",color:"teal",popover:{placement:"bottom",visibility:"click"},"min-date":new Date},model:{value:t.tempSearch.range,callback:function(e){t.$set(t.tempSearch,"range",e)},expression:"tempSearch.range"}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"checkoutDate"}},[t._v("退房時間")]),a("div",{staticClass:"position-relative mt-1"},[a("font-awesome-icon",{staticClass:"position-absolute text-primary mr-1 calendar-icon",attrs:{icon:["far","calendar-alt"]}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkoutDate,expression:"checkoutDate"}],staticClass:"form-control pl-4 bg-white cursor rounded-0 border-0",attrs:{type:"text",id:"checkoutDate","aria-describedby":"pickerDate",readonly:""},domProps:{value:t.checkoutDate},on:{input:function(e){e.target.composing||(t.checkoutDate=e.target.value)}}})],1)])]),a("button",{staticClass:"btn btn-outline-secondary w-100 rounded-0 btn-search"},[t._v("搜尋")])],1)])])])]),a("div",{staticClass:"col-md-8 col-lg-9"},[a("ul",{staticClass:"product-list"},[t._l(t.destinationHotels,(function(e){return a("li",{key:e.title,staticClass:"row no-gutters mb-3 bg-shadow cursor",on:{click:function(a){return t.goHotel(e)}}},[a("div",{staticClass:"col-4 col-lg-3 bg-lg-image bg-cover",style:"background-image: url("+e.imageUrl[0]+");}"}),a("div",{staticClass:"col-8 col-lg-9"},[a("div",{staticClass:"d-flex flex-column p-3 text-left"},[a("h2",{staticClass:"h5 h4-md"},[a("span",{staticClass:"d-block d-inline"},[t._v(t._s(e.title))]),t._l(Number(e.options.hotelRating),(function(t){return a("font-awesome-icon",{key:t,staticClass:"h6 text-warning",attrs:{icon:["fas","star"]}})}))],2),a("div",{staticClass:"mt-2 text-primary"},[a("font-awesome-icon",{staticClass:"text-secondary mr-1",attrs:{icon:["fas","map-marker-alt"]}}),t._v(t._s(e.options.address.city)+t._s(e.options.address.road))],1),a("p",{staticClass:"mt-2 flex-grow-1 ellipsis"},[t._v(t._s(e.content))]),a("div",{staticClass:"text-right "},[a("h5",{staticClass:"h6 h5-md text-line-through text-danger"},[t._v("$"+t._s(t._f("moneyFilter")(e.origin_price)))]),a("h4",{staticClass:"h5 h4-md text-primary mb-2"},[t._v("每晚最低房價 : $"+t._s(t._f("moneyFilter")(e.price)))]),a("div",{staticClass:"d-flex align-items-center"},[a("span",{staticClass:"badge badge-secondary mr-auto"},[t._v(t._s(e.category))]),a("a",{staticClass:"btn btn-primary rounded-0",attrs:{href:"#"}},[t._v("現在預定")])])])])])])}))],2)])])])])],1)},i=[],r=(a("99af"),a("4de4"),a("ac1f"),a("841c"),{data:function(){return{hotels:[],isLoading:!1,search:{destination:"台北市",range:{start:new Date,end:new Date((new Date).getTime()+864e5)}},tempSearch:{destination:"台北市",range:{start:new Date,end:new Date((new Date).getTime()+864e5)}}}},methods:{getHotels:function(){var t=this;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io/api/").concat("c62ed506-1fb9-4a50-912d-1c0feaaff93a","/ec/products");this.$http.get(e).then((function(e){t.hotels=e.data.data,t.isLoading=!1})).catch((function(e){t.$bus.$emit("pushmessage","warning","連線錯誤 : ".concat(e)),t.isLoading=!1}))},goHotel:function(t){var e=JSON.parse(JSON.stringify(this.search));e.range.start=this.search.range.start.getTime(),e.range.end=this.search.range.end.getTime(),this.$router.push({path:"/product/".concat(t.id),query:{search:e}})},searchRoom:function(){this.search.destination=this.tempSearch.destination,this.search.range.start=this.tempSearch.range.start,this.search.range.end=this.tempSearch.range.end,this.$refs.seachedData.classList.remove("show")},getSearchDate:function(){this.$route.query.search&&this.$route.query.search.destination&&(this.search.destination=this.$route.query.search.destination,this.search.range.start=new Date(this.$route.query.search.range.start),this.search.range.end=new Date(this.$route.query.search.range.end),this.tempSearch.destination=this.$route.query.search.destination,this.tempSearch.range.start=new Date(this.$route.query.search.range.start),this.tempSearch.range.end=new Date(this.$route.query.search.range.end))}},created:function(){this.getHotels(),this.getSearchDate()},computed:{checkinDate:function(){return this.tempSearch.range.start.getFullDate()},checkoutDate:function(){return this.tempSearch.range.end.getFullDate()},destinationHotels:function(){var t=this;return this.hotels.filter((function(e){return e.options.address.city===t.search.destination}))}}}),n=r,o=(a("b60a"),a("2877")),c=Object(o["a"])(n,s,i,!1,null,null,null);e["default"]=c.exports},"841c":function(t,e,a){"use strict";var s=a("d784"),i=a("825a"),r=a("1d80"),n=a("129f"),o=a("14c3");s("search",1,(function(t,e,a){return[function(e){var a=r(this),s=void 0==e?void 0:e[t];return void 0!==s?s.call(e,a):new RegExp(e)[t](String(a))},function(t){var s=a(e,t,this);if(s.done)return s.value;var r=i(t),c=String(this),l=r.lastIndex;n(l,0)||(r.lastIndex=0);var d=o(r,c);return n(r.lastIndex,l)||(r.lastIndex=l),null===d?-1:d.index}]}))},b60a:function(t,e,a){"use strict";var s=a("bdc6"),i=a.n(s);i.a},bdc6:function(t,e,a){}}]);
//# sourceMappingURL=chunk-409d9451.bcb18a9c.js.map